- name: Packages - Windows
  when: ansible_facts['os_family'] == "Windows"
  block:
    - name: Install packages on Windows
      win_chocolatey:
        name:
          - 7zip
          - brave
          - googlechrome
          - ConEmu
          - discord
          - dropbox
          - ffmpeg
          #- fluent-terminal
          - foobar2000
          - handle
          - insideclipboard
          - krita
          - nmap
          #- notion #Don't think it worked
          - obs-studio
          - openhardwaremonitor
          - postman
          - pngcheck
          - procexp
          - procmon
          #- rammap #Bad checksum
          - regshot #Excess Dependencies
          - screentogif
          - sharex
          - sublimetext3
          - vlc
    - name: Install git on Windows
      win_chocolatey:
        name: git.install
        params: /NoGuiHereIntegration /SChannel

- name: Packages - Linux
  when: ansible_facts['os_family'] != "Windows"
  become: yes
  block:
    - name: Install apt key for Chrome PPA
      apt_key:
        url: '{{ item }}'
      loop:
        - https://dl-ssl.google.com/linux/linux_signing_key.pub
    - name: Install apt key for Dropbox PPA
      apt_key:
        keyserver: pgp.mit.edu
        id: 1C61A2656FB57B7E4DE0F4C1FC918B335044912E
    - name: Install apt repositories
      apt_repository:
        repo: '{{ item }}'
      loop:
        - deb http://ppa.launchpad.net/kritalime/ppa/ubuntu bionic main 
        - deb http://ppa.launchpad.net/obsproject/obs-studio/ubuntu bionic main
        - deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
        - deb https://linux.dropbox.com/ubuntu bionic main
    - name: Install apt packages
      package:
        name:
          - p7zip-full
          - ffmpeg
          # Need a media player
          - git
          - krita
          - nmap
          - obs-studio
          - remmina
          - remmina-plugin-rdp #Windows RDP
          #TODO: postman is a tar.gz
          - vlc
          - xclip
        state: present
    - name: Install debs
      apt:
        deb: '{{ item }}'
      loop:
        - https://discordapp.com/api/download?platform=linux&format=deb
