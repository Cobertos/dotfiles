- name: nvm - Windows
  when: ansible_facts['os_family'] == "Windows"
  win_chocolatey:
    name: nvm

# From the official nvm repo
# https://github.com/nvm-sh/nvm#ansible
- name: nvm - Linux
  when: ansible_facts['os_family'] != "Windows"
  block:
    - name: Install nvm shell script
      shell: >
        curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash
      args:
        creates: "{{ ansible_env.HOME }}/.nvm/nvm.sh"
    - name: Checkout LTS for other node things
      shell: >
        . {{ ansible_env.HOME }}/.nvm/nvm.sh &&
        nvm install --lts &&
        nvm list --no-colors &&
        nvm use --lts